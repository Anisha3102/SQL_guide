# What is a subquery? Give an example.

## What is a Subquery in SQL?
A subquery (also called an inner query or nested query) is a query embedded inside another SQL query. It is used to perform intermediate results that the outer query depends on. Subqueries are typically used in the WHERE, HAVING, or FROM clauses to filter, compare, or join data based on dynamic results.

## Key Points:
- A subquery must be enclosed in parentheses.

- It must return a single value (scalar), a single column (column subquery), or a table (row subquery) depending on the context.

- Subqueries can be correlated (depend on the outer query) or non-correlated (independent).

## Example 1: Subquery in WHERE clause
### Problem: Find employees who earn more than the average salary.

```sql
SELECT employee_name
FROM employees
WHERE salary > (
    SELECT AVG(salary)
    FROM employees
);
```
### Explanation:

- The subquery (SELECT AVG(salary) FROM employees) calculates the average salary.

- The outer query then selects employees whose salary is greater than that average.

## Example 2: Subquery in FROM clause
```sql
SELECT department, avg_salary
FROM (
    SELECT department, AVG(salary) AS avg_salary
    FROM employees
    GROUP BY department
) AS dept_avg
WHERE avg_salary > 50000;
```
### Explanation:

- The inner query (FROM (...)) calculates the average salary for each department.

- The outer query filters departments with average salary greater than 50,000.