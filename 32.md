# What is a self join? Give an example use case.

- A self join is a regular join, but the table is treated as if it were two different tables by giving it aliases.
- It’s useful when rows in the same table need to be compared or related.

## Syntax
```sql SELECT a.column_name, b.column_name
FROM table_name a
JOIN table_name b
   ON a.some_column = b.some_column;
```
## Example Use Case 1: Employee – Manager Relationship

- Suppose we have an employees table:

emp_id	emp_name	manager_id
1	    Alice	    3
2	    Bob	        3
3	    Charlie  	NULL
4	    David	    2

- Each employee has a manager_id that refers to another emp_id in the same table.

- Query to find employees with their managers:

```sql SELECT e.emp_name AS employee,
       m.emp_name AS manager
FROM employees e
LEFT JOIN employees m
   ON e.manager_id = m.emp_id;
```

## Result:

employee	manager
Alice	    Charlie
Bob	        Charlie
Charlie  	NULL
David	    Bob
## Example Use Case 2: Finding Duplicate Rows

- If we want to find employees with the same manager:

```sql SELECT e1.emp_name AS employee1,
       e2.emp_name AS employee2,
       e1.manager_id
FROM employees e1
JOIN employees e2
   ON e1.manager_id = e2.manager_id
  AND e1.emp_id < e2.emp_id;
```

- This avoids pairing the same employee with themselves.A self join is a regular join, but the table is treated as if it were two different tables by giving it aliases.
- It’s useful when rows in the same table need to be compared or related.

## Syntax
```sql SELECT a.column_name, b.column_name
FROM table_name a
JOIN table_name b
   ON a.some_column = b.some_column;
```
## Example Use Case 1: Employee – Manager Relationship

- Suppose we have an employees table:

emp_id	emp_name	manager_id
1	    Alice	    3
2	    Bob	        3
3	    Charlie	    NULL
4	    David	    2

- Each employee has a manager_id that refers to another emp_id in the same table.

- Query to find employees with their managers:

```sql SELECT e.emp_name AS employee,
       m.emp_name AS manager
FROM employees e
LEFT JOIN employees m
   ON e.manager_id = m.emp_id;
```

## Result:

employee	manager
Alice	    Charlie
Bob	        Charlie
Charlie   	NULL
David	    Bob
## Example Use Case 2: Finding Duplicate Rows

- If we want to find employees with the same manager:

```sql SELECT e1.emp_name AS employee1,
       e2.emp_name AS employee2,
       e1.manager_id
FROM employees e1
JOIN employees e2
   ON e1.manager_id = e2.manager_id
  AND e1.emp_id < e2.emp_id;
```

- This avoids pairing the same employee with themselves.