# What are window functions? Examples of ROW_NUMBER(), RANK(), DENSE_RANK()

- Window functions in SQL are functions that perform calculations across a set of rows related to the current row, without collapsing them into a single result (unlike GROUP BY).

- They use the OVER() clause to define the window (set of rows) over which the function operates.
##### Common uses: ranking, running totals, moving averages, and cumulative counts.

## Syntax
```sql
function_name() OVER (
    PARTITION BY column_name
    ORDER BY column_name
)
```
- PARTITION BY → Divides the data into groups (optional).

- ORDER BY → Defines the order of rows for the calculation.

## Examples
### Table: Sales

id	salesperson	amount
1	Alice	    500
2	Bob	        300
3	Alice	    700
4	Bob	        300
5	Alice	    700

## 1. ROW_NUMBER()
- Gives a unique sequential number to each row within its partition, starting from 1.

```sql
SELECT 
    salesperson,
    amount,
    ROW_NUMBER() OVER (PARTITION BY salesperson ORDER BY amount DESC) AS row_num
FROM Sales;
```
## Output:

salesperson	amount	row_num
Alice	    700	     1
Alice	    700	     2
Alice	    500	     3
Bob	        300	     1
Bob	        300	     2

## 2. RANK()
- Gives a rank, but ties get the same rank, and next rank skips numbers.

```sql
SELECT 
    salesperson,
    amount,
    RANK() OVER (PARTITION BY salesperson ORDER BY amount DESC) AS rank_num
FROM Sales;
```
## Output:

salesperson	amount	rank_num
Alice	    700	    1
Alice	    700	    1
Alice	    500	    3
Bob	        300	    1
Bob	        300	    1

## 3. DENSE_RANK()
- Similar to RANK(), but no gaps in rank numbers.

```sql
SELECT 
    salesperson,
    amount,
    DENSE_RANK() OVER (PARTITION BY salesperson ORDER BY amount DESC) AS dense_rank_num
FROM Sales;
```
## Output:

salesperson	amount	dense_rank_num
Alice	    700	    1
Alice	    700	    1
Alice	    500	    2
Bob	        300	    1
Bob	        300	    1

## Key difference:

- ROW_NUMBER() → No ties; unique sequence.

- RANK() → Ties get same rank; skips numbers.

- DENSE_RANK() → Ties get same rank; no skips.